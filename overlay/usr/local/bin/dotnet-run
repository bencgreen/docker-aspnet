#!/usr/bin/with-contenv sh

set -euo pipefail


#======================================================================================================================
# Verify APP_ASSEMBLY is set
#======================================================================================================================

if [ -z "${APP_ASSEMBLY}" ] ; then
    _error "APP_ASSEMBLY environment variable must be set."
fi


#======================================================================================================================
# Verify APP_ASSEMBLY exists
#======================================================================================================================

RUN=/src/${APP_ASSEMBLY}
if [ ! -f "${RUN}" ] ; then
    _error "APP_ASSEMBLY could not be found: ${RUN}."
fi


#======================================================================================================================
# Run ASP.NET application
#======================================================================================================================

_echo "Running ${RUN}"
/usr/share/dotnet/dotnet ${RUN}
