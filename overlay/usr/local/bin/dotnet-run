#!/usr/bin/with-contenv sh

set -euo pipefail


#======================================================================================================================
# Verify APP_ASSEMBLY is set
#======================================================================================================================

[[ -z "${APP_ASSEMBLY-}" ]] && _error "APP_ASSEMBLY environment variable must be set."


#======================================================================================================================
# Verify APP_ASSEMBLY exists
#======================================================================================================================

RUN=/src/${APP_ASSEMBLY}
[[ ! -f "${RUN}" ]] && _error "APP_ASSEMBLY could not be found: ${RUN}."


#======================================================================================================================
# Run ASP.NET application
#======================================================================================================================

_echo "Running ${RUN}"
/usr/share/dotnet/dotnet ${RUN}
