#!/usr/bin/with-contenv bash

#======================================================================================================================
# Download and run installer
#======================================================================================================================

cd /tmp

INSTALLER="dotnet-install.sh"
URL="https://dot.net/v1/${INSTALLER}"
echo " - downloading ${URL}..."
curl -sL -o ${INSTALLER} ${URL} && chmod +x ${INSTALLER}
echo " - done."

echo " - installing .NET..."
./${INSTALLER} --channel ${CHANNEL} --runtime aspnetcore && rm ${INSTALLER}

if [ -d /usr/share/dotnet ] ; then
    echo " - done."
    exit 0
else
    echo " - error."
    exit 1
fi
